{% extends "emails/base_email.html" %}

{% block title %}Password Reset Code{% endblock %}

{% block extra_styles %}
.greeting {
font-size: 20px;
color: #1e293b;
margin-bottom: 20px;
font-weight: 600;
}

.reset-text {
font-size: 16px;
color: #334155;
line-height: 1.6;
margin-bottom: 25px;
}

.code-container {
text-align: center;
margin: 40px 0;
}

.reset-code {
display: inline-block;
background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
color: #ffffff !important; /* Force white text for email clients */
font-family: 'Courier New', monospace;
font-size: 32px;
font-weight: bold;
padding: 20px 40px;
border-radius: 12px;
letter-spacing: 8px;
margin: 15px 0;
box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
border: 3px solid #1e40af;
}

.code-label {
font-size: 14px;
color: #64748b;
margin-bottom: 10px;
text-transform: uppercase;
letter-spacing: 1px;
font-weight: 600;
}

.instructions-box {
background-color: #f0f9ff;
border-left: 4px solid #0ea5e9;
padding: 20px;
border-radius: 8px;
margin: 25px 0;
}

.instructions-title {
font-size: 16px;
font-weight: 600;
color: #0c4a6e;
margin-bottom: 12px;
}

.instructions-list {
margin: 0;
padding-left: 20px;
color: #0369a1;
}

.instructions-list li {
margin-bottom: 8px;
line-height: 1.5;
}

.security-note {
font-size: 14px;
color: #64748b;
margin: 30px 0;
padding: 15px;
background-color: #f8fafc;
border-radius: 6px;
border: 1px solid #e2e8f0;
text-align: center;
font-weight: 500;
}

@media (max-width: 600px) {
.reset-text {
font-size: 15px;
}

.reset-code {
font-size: 28px;
padding: 16px 32px;
letter-spacing: 6px;
}

.instructions-box {
padding: 16px;
}
}
{% endblock %}

{% block content %}
<div class="greeting">
    Hi {{ user.first_name|default:"there" }},
</div>

<div class="reset-text">
    We received a request to reset the password for your Cannabis Management System account ({{ user.email }}).
</div>

<div class="reset-text">
    Use the following 4-digit code to reset your password:
</div>

<div class="code-container">
    <div class="code-label">Your Reset Code</div>
    <div class="reset-code">{{ reset_code }}</div>
</div>

<div class="security-note">
    This code expires in 24 hours, can only be used once, and you have {{ max_attempts }} attempts to enter it
    correctly.
</div>

<div class="instructions-box">
    <div class="instructions-title">How to use your reset code:</div>
    <ol class="instructions-list">
        <li>Go to the password reset page: <strong>{{ frontend_url }}</strong></li>
        <li>Enter your email address: <strong>{{ user.email }}</strong></li>
        <li>Enter the 4-digit code: <strong>{{ reset_code }}</strong></li>
        <li>You'll be automatically logged in to update your password</li>
    </ol>
</div>

<div class="reset-text" style="margin-top: 25px; padding-top: 25px; border-top: 1px solid #e2e8f0; font-size: 14px;">
    <strong>Didn't request this?</strong> You can safely ignore this email. Your password will remain unchanged, and no
    further action is required.
</div>

<div class="reset-text" style="font-size: 14px; color: #64748b;">
    This code expires on {{ expires_at|date:"F j, Y" }} at {{ expires_at|date:"g:i A T" }}.
</div>
{% endblock %}